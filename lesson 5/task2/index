<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Урок 5. Введение в DOM</title>
    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <div id="header">
        <h1>Task-2.</h1>
        <div id="main">

        </div>
    </div>
    <script>
        let shoppingCart = []
        let basketEmpty = '<p>Ваша корзина пуста</p>'

        function Item(product, price, quantity) {
            this.product = product;
            this.price = price;
            this.quantity = quantity
        }

        shoppingCart.push(
            new Item('Меринос', 100, 2)
        );
        shoppingCart.push(
            new Item('Акрил', 200, 5)
        );
        shoppingCart.push(
            new Item('Ангора', 300, 1)
        );

        // выводим список товаров в корзине
        if (shoppingCart == 0) {
            main.insertAdjacentHTML('beforeend', `<div class="prod_item total">${basketEmpty}</div>`);
        } else {
            for (const iterator of shoppingCart) {
                main.insertAdjacentHTML('beforeend',
                    `<div class="prod_item">
        <span>Товар - ${iterator.product}</span> 
        <span>Цена товара - ${iterator.price} руб</span>
        <span>Количество - ${iterator.quantity}</span>
        </div>`);
            }
        }

        // Итоговая сумма
        function finalChart(shoppingCart) {
            return shoppingCart.reduce(function (acc, shoppingCart) {
                return acc + shoppingCart.quantity
            }, 0)
        };

        // Всего штук
        function finalCost(shoppingCart) {
            return shoppingCart.reduce(function (acc, shoppingCart) {
                return acc + (shoppingCart.price * shoppingCart.quantity)
            }, 0)
        };

        // Итоговая сумма и количество штук
        if (shoppingCart != 0) {
            const totalPrice = main.insertAdjacentHTML('beforeend',
                `<hr><div class="prod_item total">В корзине: ${finalChart(shoppingCart)} товаров на сумму 
    ${finalCost(shoppingCart)} рублей</div>`);
        }

    </script>

</body>

</html>
